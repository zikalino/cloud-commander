#--------------------------------------------------------------------------------------------------------------
# Autogenerated by SmarterGen - do not modify this file.
#--------------------------------------------------------------------------------------------------------------
# You can create an instance with a hostname argument, as well as any other options you provide.
# If you don't provide a hostname, it will be automatically generated.
# If you wish to use a custom format, the available fields are:
#         * id
#         * hostname
#         * size
#         * region
#         * public_ip
#         * status
#         * network_id
#         * diskimage_id
#         * initial_user
#         * ssh_key
#         * notes
#         * firewall_id
#         * tags
#         * script
#         * created_at
#         * reverse_dns
#         * private_ip
#         * public_ip
# 
# Usage:
#   civo instance create [flags]
# 
# Aliases:
#   create, new, add
# 
# Examples:
# civo instance create HOSTNAME [flags]
# 
# Flags:
#   -t, --diskimage string      the instance's disk image (from 'civo diskimage ls' command)
#   -l, --firewall string       the instance's firewall you can use the Name or the ID
#   -h, --help                  help for create
#   -s, --hostname string       the instance's hostname
#   -u, --initialuser string    the instance's initial user
#   -r, --network string        the instance's network you can use the Name or the ID
#       --private_ipv4 string   Private IPv4 address
#   -p, --publicip string       This should be either "none" or "create" (default "create")
#       --reservedip string     Reserved IPv4 address
#       --script string         path to a script that will be uploaded to /usr/local/bin/civo-user-init-script on your instance, read/write/executable only by root and then will be executed at the end of the cloud initialization
#   -i, --size string           the instance's size (from 'civo instance size' command)
#       --skip-shebang-check    skip the shebang line check when passing a user init script
# #   -k, --sshkey string         the instance's ssh key you can use the Name or the ID
#   -g, --tags string           the instance's tags
#       --volume-type string    Specify the volume type for the instance
#   -v, --volumes strings       List of volumes to attach at boot
#   -w, --wait                  wait until the instance's is ready

- type: row
  subitems:
    - type: textfield
      name: Name (required)
      produces:
        - variable: host_name
    - $include: __civo_region_list_selector_field.yaml
    - $include: __civo_size_list_selector_field.yaml
# - $include: __upctl_storage_list_selector.yaml

- $include: generic_vm_size_information.yaml
- $include: generic_vm_price_information.yaml

- type: separator

- $include: __civo_diskimage_list_selector.yaml

- type: separator

- $include: __civo_firewall_list_selector.yaml

- type: separator

- type: 'action-row'
  name: Create Civo Instances
  consumes:
    - variable: host_name
    - variable: region
    - variable: vm_size
  verify: |
      civo instance show ${host_name} --region ${region} --output json
  install: civo instance create --hostname ${host_name} --region ${region} --size ${vm_size}
